<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
	<title></title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.2/css/swiper.min.css">
<link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>
<script src="js/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.2/js/swiper.min.js"></script>

<div class="swiper-container">
    <div class="swiper-wrapper">
        <div class="swiper-slide red">
        	<section>
        		<img id="bg" src="images/swiper_1/bg.png">
        		<img id="dog" src="images/swiper_1/dog.png">
        	</section>
        	<div>
        		<img id="2018" src="images/swiper_1/2018.png">
        		<img id="wd" src="images/swiper_1/wd.png">
        		<img id="ndbg" src="images/swiper_1/ndbg.png">	
        	</div>

        </div>
        <div class="swiper-slide blue">
            <section id="swiper_2_bg">
                <audio id="audio" controls src="audio/loser.mp3" played="played"></audio>
                <canvas width="300" height="300" id="canvas"></canvas>
            </section>
        	



        <script>
    var canvas = document.getElementById("canvas");
    var cxt = canvas.getContext("2d");
    //获取API
    var AudioContext = AudioContext || webkitAudioContext;
    var context = new AudioContext;
    //加载媒体
    var audio = document.getElementById("audio");
    //创建节点
    var source = context.createMediaElementSource(audio);
    var analyser = context.createAnalyser();
    //连接：source → analyser → destination
    source.connect(analyser);
    analyser.connect(context.destination);
    //创建数据
    var output = new Uint8Array(360);
    (function drawSpectrum() {
        analyser.getByteFrequencyData(output);//获取频域数据
        cxt.clearRect(0, 0, canvas.width, canvas.height);
        //画线条
        for (var i = 0; i < 360; i++) {
            var value = output[i] / 8;//<===获取数据
            cxt.beginPath();
            cxt.lineWidth = 2;
            cxt.strokeStyle = "white";

            cxt.moveTo(150, 150);
            //R * cos (PI/180*一次旋转的角度数) ,-R * sin (PI/180*一次旋转的角度数)
            cxt.lineTo(Math.cos((i * 1) / 80 * Math.PI) * (100 + value) + 150, (- Math.sin((i * 1) / 80 * Math.PI) * (100 + value) + 150));
            cxt.stroke();
        }
        //画一个小圆，将线条覆盖
        cxt.beginPath();
        cxt.lineWidth = 1;
        cxt.arc(150, 150, 98, 0, 2 * Math.PI, false);

        var img = new Image();
        img.src = "images/swiper_2/loser.png";
        var a=document.getElementById("logo");
        var pat=cxt.createPattern(img,"no-repeat");
        cxt.fillStyle = pat;   

        cxt.stroke();
        cxt.fill();
        //请求下一帧
        requestAnimationFrame(drawSpectrum);
    })();
</script>

        </div>
        <div class="swiper-slide green"></div>
        <div class="swiper-slide yellow"></div>
    </div>
</div>

<script>  
$(document).ready(function () {      
 	var mySwiper = new Swiper ('.swiper-container', {
	    direction: 'vertical', // 垂直切换选项
	   	
	    speed:400,
	    on: {

	    	init: function(){
	    		$("#bg").animate({
		        	width: "100%"
		        },1000);
		        $("#dog").animate({
		        	bottom:"0"
		        },1200);
		        $("#2018").animate({
		        	marginTop: "50%"
		        },1000);
		        $("#ndbg").delay(1000).animate({
		        	marginTop: "10%",
		        	opacity:"1"
		        },800);
	    	},




		    slideNextTransitionEnd: function(){
		      console.log("d123323");//切换结束时，诉我现在是第几个slide
		     
		      



		    },



  		},
  	})   
})     
  </script>




</body>
</html>